OCFL OBJECT VALIDATION REPORT
Object ID: obj-031
Validation Date: 2025-11-09
Status: INVALID

================================================================================
VALIDATION ERROR SUMMARY
================================================================================

Error Code: E061
Error Message: invalid contents of inventory sidecar file
Object Path: /workspace/objects/obj-031
Affected File: inventory.json.sha512

================================================================================
DETAILED ANALYSIS
================================================================================

1. PRIMARY ISSUE: MALFORMED INVENTORY.JSON.SHA512 SIDECAR

The root cause of the validation failure is the improper format of the
v1/inventory.json.sha512 sidecar file.

File Location: /workspace/objects/obj-031/v1/inventory.json.sha512
Current Content: 032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a inventory.json

Issue: The sidecar file contains extra text "inventory.json" after the hash value.
According to OCFL spec, a sidecar file should contain ONLY the hash digest,
one per line, with no additional text or filenames.

Expected Format: A single SHA512 digest value, followed by newline
Actual Format: <hash> inventory.json<newline>

2. CHECKSUM VERIFICATION

Root inventory.json.sha512:
- File: /workspace/objects/obj-031/inventory.json.sha512
- Content: 032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a
- Actual SHA512: 032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a
- Status: MATCHES

Version 1 inventory.json.sha512:
- File: /workspace/objects/obj-031/v1/inventory.json.sha512
- Content: 032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a inventory.json
- Actual SHA512 of inventory.json: 032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a
- Status: INVALID FORMAT (contains "inventory.json" suffix)

3. CONTENT VERIFICATION

File: test.txt
- Location: /workspace/objects/obj-031/v1/content/test.txt
- Content: "testing\n"
- SHA512: 24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28
- Manifest Reference: MATCHES

4. STRUCTURAL ANALYSIS

Object Structure:
  /workspace/objects/obj-031/
  ├── 0=ocfl_object_1.1 (OCFL marker file - valid)
  ├── inventory.json (root inventory - valid format)
  ├── inventory.json.sha512 (root sidecar - valid format)
  └── v1/
      ├── inventory.json (version inventory - content OK)
      ├── inventory.json.sha512 (version sidecar - INVALID FORMAT)
      └── content/
          └── test.txt (content file - valid)

================================================================================
ROOT CAUSE ANALYSIS
================================================================================

The v1/inventory.json.sha512 sidecar file was created with an incorrect format.
Instead of containing only the hash value, it includes filename metadata
("inventory.json") after the hash. This violates OCFL specification section
on sidecar files (digest value files).

The error is in the v1 version state inventory sidecar, not the root inventory
sidecar. The root inventory.json.sha512 is properly formatted with only the
digest value.

================================================================================
RECOMMENDED FIX
================================================================================

To fix this validation error, modify the v1/inventory.json.sha512 file:

ACTION: Remove the "inventory.json" text from the end of the sidecar file

BEFORE:
032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a inventory.json

AFTER:
032c545b5cb61ce4fafc0cef91fd9895859dcb8f0eb9485f3d5e1a25ccc5caa061345820ceeb99f81be1f0d54df9abcedad654a82c5d7d7922d02bb165ac315a

STEPS:
1. Edit /workspace/objects/obj-031/v1/inventory.json.sha512
2. Replace the entire content with only the SHA512 hash digest (no filename)
3. Ensure the file ends with a single newline
4. Run validation again: ocfl validate --object /workspace/objects/obj-031

================================================================================
IMPACT ASSESSMENT
================================================================================

This is a strict compliance issue with OCFL specification. The sidecar file
format violation will prevent the object from being recognized as valid by
OCFL validators, though the actual content and checksums are correct.

The fix is straightforward and does not affect the content files or their
integrity.

================================================================================
END OF REPORT
================================================================================
