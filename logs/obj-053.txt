OCFL OBJECT VALIDATION REPORT
Object ID: obj-053
Validation Date: 2025-11-09
Status: INVALID

================================================================================
SUMMARY OF VALIDATION ERRORS
================================================================================

Error Code: E093
Issue: Checksum Mismatch for Content File
File: v1/content/test.txt
Actual SHA512: 1277a792c8196a2504007a40f31ed93bf826e71f16273d8503f7d3e46503d00b8d8cda0a59d6a33b9c1aebc84ea6a79f7062ee080f4a9587055a7b6fb92f5fa8
Expected SHA512: 24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28

================================================================================
ANALYSIS
================================================================================

The OCFL object obj-053 contains a critical validation failure. The issue is:

1. DIGEST MISMATCH
   - The inventory.json file declares that test.txt should have a SHA512 digest of:
     24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28

   - However, the actual SHA512 digest of the file on disk is:
     1277a792c8196a2504007a40f31ed93bf826e71f16273d8503f7d3e46503d00b8d8cda0a59d6a33b9c1aebc84ea6a79f7062ee080f4a9587055a7b6fb92f5fa8

   - This indicates that the file content has been modified or corrupted since the inventory
     was created.

2. OBJECT STRUCTURE
   - Object Location: /workspace/objects/obj-053
   - Content File: v1/content/test.txt
   - Content: "updated!" (9 bytes)
   - Manifest Algorithm: SHA512
   - OCFL Version: 1.1

3. ROOT CAUSE
   The file content appears to have been changed. The inventory.json references one
   specific digest, but the actual file has different content that produces a different
   checksum. This could have occurred due to:
   - Accidental modification of the file
   - Corruption of the file
   - The wrong file being placed in this location
   - The inventory.json not being properly updated when content was modified

================================================================================
RECOMMENDED STEPS FOR FIXING THE OBJECT
================================================================================

Option 1: Restore Original Content (If Available)
--------
If you have a backup of the original content that matches the expected digest
24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28:
   a. Replace /workspace/objects/obj-053/v1/content/test.txt with the original file
   b. Verify the SHA512 matches the expected value
   c. Re-run: ocfl validate --object /workspace/objects/obj-053

Option 2: Create New Version with Updated Content (Recommended)
--------
If the current content is correct and should be preserved:
   a. Calculate the SHA512 of the current file:
      sha512sum /workspace/objects/obj-053/v1/content/test.txt
      Result: 1277a792c8196a2504007a40f31ed93bf826e71f16273d8503f7d3e46503d00b8d8cda0a59d6a33b9c1aebc84ea6a79f7062ee080f4a9587055a7b6fb92f5fa8

   b. Create a new version (v2) that properly documents this content change:
      - Create v2/inventory.json with the updated manifest and state entries
      - Update the manifest to map the actual digest to the content path
      - Update the version history to show this is the new state
      - Ensure inventory.json at the root is updated with head: "v2"

   c. Verify with: ocfl validate --object /workspace/objects/obj-053

Option 3: Manual Inventory Update (If Content is Correct)
--------
If you want to keep the current file and fix only the inventory:
   a. Update both inventory.json and v1/inventory.json to reflect the actual digest
   b. Replace:
      "24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28"

      with:
      "1277a792c8196a2504007a40f31ed93bf826e71f16273d8503f7d3e46503d00b8d8cda0a59d6a33b9c1aebc84ea6a79f7062ee080f4a9587055a7b6fb92f5fa8"

      in both manifest and version state sections
   c. Recalculate and update the inventory.json.sha512 checksum
   d. Re-run validation

================================================================================
CONCLUSION
================================================================================

The object contains a single critical issue: a checksum mismatch on the content file.
This is a data integrity concern that must be resolved before the object can be
considered valid in the OCFL storage system. The recommended approach depends on
whether the current file content is intended or if restoration is possible.

