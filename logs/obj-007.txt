OCFL OBJECT VALIDATION REPORT
Object ID: urn:example-2
Object Path: /workspace/objects/obj-007
Validation Date: 2025-11-09
Status: INVALID

================================================================================
VALIDATION ERROR SUMMARY
================================================================================

The OCFL object at /workspace/objects/obj-007 failed validation with the following error:

ERROR CODE: E093
MESSAGE: Unexpected MD5 digest value for "v1/content/test.txt"
ACTUAL MD5:    eb1a3227cdc3fedbaec2fe38bf6c044a
EXPECTED MD5:  9eacfb9289073dd9c9a8c4cdf820ac71

================================================================================
DETAILED ANALYSIS
================================================================================

1. OBJECT STRUCTURE
   - OCFL Version: 1.1
   - Object ID: urn:example-2
   - Head Version: v1
   - Digest Algorithm: sha512 (primary)
   - Content Directory: content

2. MANIFEST INTEGRITY
   The object's manifest contains:
   - SHA512: 24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5931baae8c7cacfea4b629452c38026a81d138bc7aad1af3ef7bfd5ec646d6c28
   - File: v1/content/test.txt

   VERIFIED: SHA512 hash matches correctly.

3. FIXITY METADATA MISMATCH
   The object's inventory.json contains fixity information for MD5:
   - Expected MD5: 9eacfb9289073dd9c9a8c4cdf820ac71
   - File: v1/content/test.txt

   ACTUAL FILE STATE:
   - Current MD5: eb1a3227cdc3fedbaec2fe38bf6c044a
   - File content: "testing\n"
   - File path: /workspace/objects/obj-007/v1/content/test.txt

4. ROOT CAUSE
   The MD5 fixity value recorded in the inventory.json does not match the actual MD5
   checksum of the file content. This indicates either:

   a) The file content has been modified since the object was created
      - The current content "testing\n" produces MD5: eb1a3227cdc3fedbaec2fe38bf6c044a
      - The expected content should produce MD5: 9eacfb9289073dd9c9a8c4cdf820ac71

   b) The fixity record was incorrectly recorded when the object was created
      - The inventory.json has stale/incorrect MD5 metadata

5. VALIDATION CONTEXT
   - Primary digest (SHA512) is valid and consistent
   - Secondary fixity check (MD5) is failing
   - The file content exists and is readable
   - The error is purely a fixity/metadata mismatch issue

================================================================================
RECOMMENDED REMEDIATION STEPS
================================================================================

Option 1: Update Fixity Metadata (Recommended if file is correct)
If the file content "testing\n" is the correct and intended content, update the
inventory.json to record the correct MD5 value:

1. Locate the fixity section in /workspace/objects/obj-007/inventory.json
2. Replace the MD5 entry:
   FROM: "9eacfb9289073dd9c9a8c4cdf820ac71": ["v1/content/test.txt"]
   TO:   "eb1a3227cdc3fedbaec2fe38bf6c044a": ["v1/content/test.txt"]
3. Update the inventory.json.sha512 file with the new SHA512 hash of inventory.json
4. Do the same for /workspace/objects/obj-007/v1/inventory.json
5. Re-validate the object with: ocfl validate --object objects/obj-007

Option 2: Restore Original File Content (Recommended if metadata is correct)
If the MD5 value 9eacfb9289073dd9c9a8c4cdf820ac71 represents the correct original
content:

1. Determine what file content would produce MD5: 9eacfb9289073dd9c9a8c4cdf820ac71
   - This would require either a backup or knowledge of original content
2. Replace the file at /workspace/objects/obj-007/v1/content/test.txt with correct content
3. Verify the new MD5 matches: 9eacfb9289073dd9c9a8c4cdf820ac71
4. Re-validate the object with: ocfl validate --object objects/obj-007

Option 3: Regenerate Object Inventory (if significant corruption suspected)
If multiple inconsistencies exist or you suspect corruption:

1. Back up the entire object directory
2. Use OCFL tools to regenerate the inventory files
3. Recalculate all digests and fixity values
4. Re-validate the object

================================================================================
IMPLEMENTATION NOTES
================================================================================

- Fixity validation (E093 error) is a secondary digest verification mechanism
- The primary SHA512 digest is valid, so core object integrity is maintained
- Fixity checks help detect silent file corruption over time
- After any remediation, validate using: ocfl validate --object objects/obj-007
- Consider skipping fixity checks initially if diagnosing:
  ocfl validate --object objects/obj-007 --skip-digest

================================================================================
