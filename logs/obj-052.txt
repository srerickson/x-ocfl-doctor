OCFL OBJECT VALIDATION REPORT
Object ID: obj-052
Location: /workspace/objects/obj-052
Validation Date: 2025-11-09
Status: INVALID

========================================
VALIDATION ERRORS SUMMARY
========================================

The OCFL object obj-052 is INVALID and has 1 critical error:

1. ERROR: Missing NAMASTE Declaration File
   - The object is missing the required OCFL specification version declaration file
   - Expected: File named "0=ocfl_object_1.0" or "0=ocfl_object_1.1" in the object root directory
   - Location: /workspace/objects/obj-052/
   - This file is REQUIRED by the OCFL specification and must be present in the root of every OCFL object
   - It serves as a declaration of the OCFL specification version implemented by this object

========================================
DETAILED ANALYSIS
========================================

Object Structure:
The object at /workspace/objects/obj-052 has the following structure:
- inventory.json (root level) - Present
- inventory.json.sha512 (root level) - Present
- v1/ directory - Present
  - inventory.json - Present (duplicate, should only be at root)
  - inventory.json.sha512 - Present (duplicate, should only be at root)
  - content/ directory - Present
    - a_file.txt - Present

Object Metadata:
- ID: ark:123/abc
- Digest Algorithm: sha512
- Head Version: v1
- Type: https://ocfl.io/1.1/spec/#inventory

Content Verification:
- Content file found: a_file.txt
- SHA512 Checksum: 43a43fe8a8a082d3b5343dfaf2fd0c8b8e370675b1f376e92e9994612c33ea255b11298269d72f797399ebb94edeefe53df243643676548f584fb8603ca53a0f
- Checksum validation: PASSED (matches inventory.json manifest)
- File size: 20 bytes
- File content: ASCII text

Inventory Checksum Verification:
- Root level inventory.json.sha512 value: 963412ebe0b18ce90cce51ec1e74c8f5c1657a97f3a912539ea449aa9ebe6fc9dd97513398292aaf8ef97f1764d332bb04b2a386bcae648c5136de54d65a6468
- Expected checksum validation: NOT VERIFIED (unable to confirm without NAMASTE declaration)

Additional Issues Identified:
- Duplicate inventory.json files: The inventory.json and inventory.json.sha512 files exist in both the root directory (/workspace/objects/obj-052/) and in the v1 directory (/workspace/objects/obj-052/v1/). According to OCFL spec, these should only exist at the object root level.

========================================
RECOMMENDED STEPS FOR FIXING
========================================

Step 1: Add the NAMASTE Declaration File (CRITICAL)
   Action: Create a file in the object root directory with the specification version
   Command: echo -n "ocfl_object_1.1" > /workspace/objects/obj-052/0=ocfl_object_1.1
   OR
   Command: echo -n "ocfl_object_1.0" > /workspace/objects/obj-052/0=ocfl_object_1.0

   Rationale: The NAMASTE file is mandatory for OCFL objects. Based on the inventory.json
   declaring type as "https://ocfl.io/1.1/spec/#inventory", version 1.1 is recommended.

   Note: The NAMASTE file has a specific format:
   - Filename: 0=ocfl_object_X.Y (where X.Y is the OCFL spec version)
   - Content: ocfl_object_X.Y (without newline at the end)
   - Encoding: UTF-8 plain text

Step 2: Remove Duplicate Inventory Files (RECOMMENDED)
   Action: Delete inventory.json and inventory.json.sha512 from the v1 directory
   Commands:
     rm /workspace/objects/obj-052/v1/inventory.json
     rm /workspace/objects/obj-052/v1/inventory.json.sha512

   Rationale: According to OCFL specification, the inventory and its checksum should
   exist only at the object root level, not within version directories.

Step 3: Verify the Checksum File Format (IMPORTANT)
   Action: Verify that inventory.json.sha512 contains the correct checksum of inventory.json
   Current checksum file content: 963412ebe0b18ce90cce51ec1e74c8f5c1657a97f3a912539ea449aa9ebe6fc9dd97513398292aaf8ef97f1764d332bb04b2a386bcae648c5136de54d65a6468

   Note: The checksum file typically should contain the algorithm name and filename
   in the format: "<hash> <filename>" (e.g., "<hash> inventory.json")
   Current content appears to only have the hash value. Verify this matches
   the expected format for your OCFL validator.

Step 4: Recalculate and Verify Inventory Checksum
   Action: After adding the NAMASTE file, verify the inventory.json checksum is correct
   Command: sha512sum /workspace/objects/obj-052/inventory.json

   Expected: Should match the value in inventory.json.sha512 file

Step 5: Revalidate the Object
   Action: Run the validation command again after making the above corrections
   Command: ocfl validate --object=/workspace/objects/obj-052

   Expected Result: Object should pass validation

========================================
CRITICAL NEXT STEPS
========================================

1. IMMEDIATE: Add the NAMASTE declaration file (Step 1 above)
   - This is the primary reason validation is failing

2. CLEANUP: Remove duplicate inventory files from v1 directory (Step 2 above)
   - While not necessarily breaking, this is non-conformant

3. VERIFY: Ensure inventory.json.sha512 format is correct (Step 3 above)
   - May require adjustment depending on validator expectations

4. REVALIDATE: Run validation again to confirm all issues are resolved

========================================
REFERENCES
========================================

OCFL Specification:
- OCFL 1.0: https://ocfl.io/1.0/spec/#object-namaste-declaration
- OCFL 1.1: https://ocfl.io/1.1/spec/#object-namaste-declaration

NAMASTE Declaration Requirements:
- File name format: 0=ocfl_object_<version>
- File content: ocfl_object_<version> (no newline)
- Location: Object root directory
- Purpose: Declares the OCFL specification version

Inventory Requirements:
- Must exist at object root level
- One inventory.json file per object
- One inventory.json.sha512 file per object
- Must NOT exist in version directories
