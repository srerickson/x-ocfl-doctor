OCFL OBJECT VALIDATION REPORT
Object: obj-022
Location: /workspace/objects/obj-022
Date: 2025-11-09
Status: INVALID

================================================================================
VALIDATION ERRORS SUMMARY
================================================================================

1. CRITICAL ERROR (E001): Invalid files/directories in object root
   - Code: E001
   - Description: Object includes invalid files or directories: extra_file
   - Severity: Critical - Prevents validation from passing

2. WARNING (W007): Missing recommended field 'message' in version v1
   - Code: W007
   - Location: root inventory.json version v1
   - Severity: Warning - Not a critical error but recommended for compliance

3. WARNING (W007): Missing recommended field 'user' in version v1
   - Code: W007
   - Location: root inventory.json version v1
   - Severity: Warning - Not a critical error but recommended for compliance

================================================================================
DETAILED ANALYSIS
================================================================================

ISSUE 1: Extra File in Object Root
-----------
The OCFL specification (https://ocfl.io/1.1/spec/#object-structure) strictly
defines what files and directories are permitted at the object root level.
The only allowed items are:

  - 0=ocfl_object_<VERSION> (declaration file)
  - inventory.json (root inventory)
  - inventory.json.sha512 (root inventory digest)
  - v<NUMBER> directories (version directories)

PROBLEM FOUND:
  - File: extra_file (located at /workspace/objects/obj-022/extra_file)
  - Content: "I am an extra file that is not allowed in an OCFL Object root
             per https://ocfl.io/draft/spec/#object-structure"
  - Impact: This violates the OCFL object structure specification and causes
            validation to fail with error E001

ISSUE 2: Missing Recommended Version Metadata
-----------
The OCFL specification recommends that version entries in the inventory include
metadata fields for audit and tracking purposes:

MISSING FIELDS:
  - "message": A human-readable message describing the version
  - "user": Information about the user/agent that created the version
    (typically includes "name" and optionally "address")

CURRENT STATE:
  Version v1 in inventory.json currently only contains:
  {
    "created": "2019-01-01T02:03:04Z",
    "state": { ... }
  }

EXAMPLE OF PROPER FORMAT:
  {
    "created": "2019-01-01T02:03:04Z",
    "message": "Initial object creation",
    "user": {
      "name": "User Name",
      "address": "user@example.com"
    },
    "state": { ... }
  }

================================================================================
RECOMMENDED STEPS FOR FIXING THE OBJECT
================================================================================

CRITICAL (Must be completed for object to be valid):

1. Remove the invalid extra_file from the object root
   Command: rm /workspace/objects/obj-022/extra_file

2. Re-run validation to confirm E001 error is resolved
   Command: ocfl validate --object=/workspace/objects/obj-022

RECOMMENDED (Should be completed for full OCFL compliance):

3. Update root inventory.json to add missing metadata fields
   - Edit /workspace/objects/obj-022/inventory.json
   - Add "message" field to the v1 version object
   - Add "user" field with name/address information

   Example update:
   "v1": {
     "created": "2019-01-01T02:03:04Z",
     "message": "Initial version",
     "user": {
       "name": "User Name"
     },
     "state": { ... }
   }

4. Update /workspace/objects/obj-022/v1/inventory.json with the same changes
   (The version inventory should match the root inventory)

5. Recalculate digests if the inventory was modified
   - If you modified the inventory files, you may need to recalculate the
     inventory.json.sha512 digest values to match

6. Re-run validation to confirm all issues are resolved
   Command: ocfl validate --object=/workspace/objects/obj-022

================================================================================
OBJECT STRUCTURE ANALYSIS
================================================================================

Current structure of /workspace/objects/obj-022:

  obj-022/
  ├── 0=ocfl_object_1.1             (OCFL version declaration - OK)
  ├── extra_file                    (INVALID - must be removed)
  ├── inventory.json                (root inventory - OK structure)
  ├── inventory.json.sha512         (root inventory digest - OK)
  └── v1/                           (version directory - OK)
      ├── content/
      │   └── a_file.txt            (object content - OK)
      ├── inventory.json            (version inventory - OK structure)
      └── inventory.json.sha512     (version inventory digest - OK)

================================================================================
SUMMARY
================================================================================

The object obj-022 is INVALID due to:

PRIMARY ISSUE:
  - Contains "extra_file" in the object root, which violates OCFL specification
    requirements (E001 error)

SECONDARY ISSUES:
  - Missing recommended "message" and "user" fields in version metadata (W007 warnings)

The primary issue MUST be fixed for the object to pass validation. The secondary
issues are warnings and should be addressed for full OCFL compliance and
interoperability.

Estimated effort to fix:
  - Critical: 1 minute (remove extra_file)
  - Recommended: 5-10 minutes (add metadata fields and update digests)
