OCFL OBJECT VALIDATION REPORT
========================================
Object ID: obj-028
Location: /workspace/objects/obj-028
Validation Status: INVALID

========================================
VALIDATION ERRORS SUMMARY
========================================

The following critical errors were detected during validation:

1. ERROR CODE E025 - Invalid Digest Algorithm (MD5)
   - Location: root inventory.json
   - Issue: digestAlgorithm is set to "md5"
   - OCFL Specification Requirement: The digestAlgorithm MUST be either "sha512" or "sha256"
   - Severity: CRITICAL

2. ERROR CODE E025 - Non-Compliant Digest Algorithm
   - Location: root inventory.json
   - Issue: 'digestAlgorithm' is not "sha512" or "sha256"
   - Details: The current value of "md5" violates OCFL 1.1 specification requirements
   - Severity: CRITICAL

========================================
DETAILED ANALYSIS
========================================

OBJECT STRUCTURE:
The object contains the following structure:
  - 0=ocfl_object_1.1 (NAMASTE tag for OCFL 1.1)
  - inventory.json (root-level inventory)
  - inventory.json.md5 (root-level digest file)
  - v1/ (version 1 directory)
    - inventory.json (version-level inventory)
    - inventory.json.md5 (version-level digest file)
    - content/my_content/
      - dracula.txt
      - poe.txt

CONTENT FILES:
The object contains two content files:
- dracula.txt (digest: fccd3f96d461f495a3bef31dc1d28f01)
- poe.txt (digest: d2c79c8519af858fac2993c2373b5203)

VERSION INFORMATION:
- Version: v1
- Created: 2020-01-01T03:03:03Z
- Message: "First version"
- User: Yog-Sothoth (mailto:all_seeing_spheres@miskatonic.edu)

ROOT CAUSE ANALYSIS:
The primary issue is that both inventory.json files (root and v1 level) specify
"digestAlgorithm": "md5" as the hash algorithm. According to the OCFL 1.1
specification, MD5 is not an acceptable digest algorithm. The specification
requires the use of either SHA-512 or SHA-256 for cryptographic integrity and
security purposes.

The use of MD5 is problematic because:
1. MD5 is considered cryptographically broken and collision-vulnerable
2. It does not meet modern security standards required by the OCFL specification
3. The validation tool correctly rejects MD5 as non-compliant

Additionally, the object uses MD5 digest files (inventory.json.md5) instead of
SHA-512 or SHA-256 digest files, which further compounds the compliance issue.

========================================
RECOMMENDED STEPS FOR FIXING
========================================

To fix this object and bring it into OCFL 1.1 compliance, follow these steps:

STEP 1: Calculate SHA-512 Digests for Content Files
  Action: Recalculate SHA-512 hashes for all content files using a tool like:
    sha512sum /workspace/objects/obj-028/v1/content/my_content/dracula.txt
    sha512sum /workspace/objects/obj-028/v1/content/my_content/poe.txt

STEP 2: Update Root-Level inventory.json
  Location: /workspace/objects/obj-028/inventory.json
  Changes Required:
    - Change "digestAlgorithm" from "md5" to "sha512" (or "sha256")
    - Update manifest entry digests to use calculated SHA-512 hashes
    - Keep the same manifest path references (v1/content/my_content/...)

  Current (INVALID):
    "digestAlgorithm": "md5",
    "manifest": {
      "fccd3f96d461f495a3bef31dc1d28f01": ["v1/content/my_content/dracula.txt"],
      "d2c79c8519af858fac2993c2373b5203": ["v1/content/my_content/poe.txt"]
    }

  Should Become (VALID):
    "digestAlgorithm": "sha512",
    "manifest": {
      "[SHA512-HASH-OF-dracula.txt]": ["v1/content/my_content/dracula.txt"],
      "[SHA512-HASH-OF-poe.txt]": ["v1/content/my_content/poe.txt"]
    }

STEP 3: Update Version-Level inventory.json
  Location: /workspace/objects/obj-028/v1/inventory.json
  Changes Required:
    - Same as Step 2 (update digestAlgorithm and manifest digests)

STEP 4: Replace MD5 Digest Files
  Actions:
    a) Delete: /workspace/objects/obj-028/inventory.json.md5
    b) Delete: /workspace/objects/obj-028/v1/inventory.json.md5
    c) Generate new SHA-512 digest files:
       - Create inventory.json.sha512 (root level)
       - Create inventory.json.sha512 (v1 level)

  The digest files should contain:
    [SHA512-HASH] inventory.json

STEP 5: Verify NAMASTE Tag
  Confirm: /workspace/objects/obj-028/0=ocfl_object_1.1 exists
  Note: This file is present and correctly named for OCFL 1.1

STEP 6: Re-validate
  After making the above changes, re-run validation:
    ocfl validate --object=/workspace/objects/obj-028

  Expected Result: No errors should be reported

========================================
VALIDATION COMMAND USED
========================================

Command: ocfl validate --object=/workspace/objects/obj-028

Exit Code: 1 (Failure)

Full Error Output:
  ERRO root inventory.json: invalid digest algorithm: "md5" object_path=/workspace/objects/obj-028 ocfl_code=E025
  ERRO root inventory.json: 'digestAlgorithm' is not "sha512" or "sha256" object_path=/workspace/objects/obj-028 ocfl_code=E025
  ERRO object has errors

========================================
OCFL SPECIFICATION REFERENCE
========================================

Reference: OCFL 1.1 Specification - Digest Algorithms
URL: https://ocfl.io/1.1/spec/#inventory

Requirement: The digestAlgorithm property MUST be either "sha512" or "sha256"

Rationale: MD5 is cryptographically broken and cannot be used for security-critical
applications. SHA-512 and SHA-256 provide the necessary collision resistance and
security properties required for long-term preservation.

========================================
Report Generated: 2025-11-09
========================================
