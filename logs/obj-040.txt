OCFL OBJECT VALIDATION REPORT
Object ID: obj-040
Location: /workspace/objects/obj-040
Validation Date: 2025-11-09
Validation Status: INVALID

================================================================================
SUMMARY OF VALIDATION ERRORS
================================================================================

Error Code: E001 (Invalid root contents)
Description: The object includes invalid files or directories
Severity: Critical

The OCFL validator detected that the object root directory contains a file
named "v2" which violates OCFL specifications. In OCFL, version directories
must be actual directories (folders), not files.

================================================================================
DETAILED ANALYSIS OF THE PROBLEM
================================================================================

Object Structure:
  - ocfl_object_1.1 (OCFL declaration file) [VALID]
  - inventory.json (object inventory) [VALID]
  - inventory.json.sha512 (inventory checksum) [VALID]
  - v1/ (version 1 directory) [VALID]
  - v2 (FILE - THIS IS THE PROBLEM) [INVALID]

The Issue:
The file "v2" is currently a text file containing the message:
  "I look like a version directory but I am a file!"

According to OCFL 1.1 specification, version directories at the object root
level must follow the naming pattern v1, v2, v3, etc., and MUST be directories,
not files.

Why This is Invalid:
1. OCFL requires version directories to contain inventory.json and content
2. A file cannot contain subdirectories
3. The validator correctly rejects this as it violates the OCFL structure rules
4. The presence of this malformed entry prevents the object from being valid

Object Content Summary:
- OCFL Version: 1.1
- Object ID: ark:123/abc
- Current Head Version: v1
- Digest Algorithm: sha512
- Total Versions Defined: 1 (v1 only)
- Files in v1: a_file.txt

================================================================================
RECOMMENDED STEPS FOR FIXING THE OBJECT
================================================================================

To resolve this validation error, you have two options:

OPTION 1: Remove the invalid v2 file (if it's not needed)
  Step 1: Delete the file: rm /workspace/objects/obj-040/v2
  Step 2: Re-validate: ocfl validate --object=/workspace/objects/obj-040
  This is recommended if the v2 file was created by mistake.

OPTION 2: Convert v2 into a proper version directory (if a v2 version is needed)
  Step 1: Backup the v2 file content if needed
  Step 2: Remove the file: rm /workspace/objects/obj-040/v2
  Step 3: Create a proper v2 directory structure:
    - mkdir -p /workspace/objects/obj-040/v2/content
    - Create inventory.json with proper versioning information
    - Add content files as needed
    - Create inventory.json.sha512 checksum
  Step 4: Update the root inventory.json to include v2 in the versions section
  Step 5: Re-validate

OPTION 3: Restore from a backup (if available)
  If this object was corrupted, restore from a previous backup and ensure
  proper OCFL compliance during any subsequent modifications.

================================================================================
NEXT STEPS
================================================================================

1. Determine if the v2 file was created intentionally or by mistake
2. If by mistake: Use Option 1 (remove the file)
3. If intentional: Use Option 2 (create proper version structure)
4. After fixing: Re-run validation with:
   ocfl validate --object=/workspace/objects/obj-040
5. Verify the validation passes (exit code 0, no error messages)

================================================================================
END OF REPORT
================================================================================
