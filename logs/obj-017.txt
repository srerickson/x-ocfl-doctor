OCFL OBJECT VALIDATION REPORT: obj-017
======================================

VALIDATION STATUS: INVALID

VALIDATION ERROR:
-----------------
Error Code: E017
Location: root inventory.json
Issue: contentDirectory contains '/'

DETAILED ANALYSIS:
------------------

The OCFL object at /workspace/objects/obj-017 fails validation due to an invalid
contentDirectory value in the inventory.json file.

CURRENT STATE:
- contentDirectory value: "content/dir"
- Actual content location: v1/content/ (without the 'dir' subdirectory)
- Manifest references: "v1/content/dir/test.txt"
- State file paths: "test.txt"

PROBLEM EXPLANATION:
The error "contentDirectory contains '/'" indicates that the contentDirectory
specification violates OCFL rules. According to the OCFL 1.1 specification,
the contentDirectory must be a relative path that does not contain forward slashes (/).

Current value: "content/dir"
This value is problematic because:
1. It contains a forward slash (/) which is not permitted in contentDirectory
2. The contentDirectory should be a simple directory name without path separators
3. The actual file structure doesn't match the inventory declarations

RECOMMENDED FIXES:
------------------

1. OPTION 1 - Change contentDirectory to valid format (Recommended):
   - Modify contentDirectory from "content/dir" to "content"
   - Update manifest paths from "v1/content/dir/test.txt" to "v1/content/test.txt"
   - File must actually exist at the updated path

2. OPTION 2 - Restructure physical files:
   - If you need nested content directories, rename the current directory
   - Move /workspace/objects/obj-017/v1/content to match the declared structure
   - Ensure paths in manifest and state align with actual file locations

STEPS TO FIX:
--------------

Step 1: Update the root inventory.json at /workspace/objects/obj-017/inventory.json:
   - Change "contentDirectory": "content/dir" to "contentDirectory": "content"
   - Change manifest path from "v1/content/dir/test.txt" to "v1/content/test.txt"

Step 2: Update the version inventory at /workspace/objects/obj-017/v1/inventory.json:
   - Apply the same contentDirectory change from "content/dir" to "content"
   - Update manifest paths accordingly

Step 3: Verify the file exists at the correct location:
   - Current: /workspace/objects/obj-017/v1/content/test.txt (exists)
   - This should remain unchanged as it's already in the correct physical location

Step 4: Recalculate and update inventory.json.sha512:
   - After modifying inventory.json, recalculate the SHA512 digest
   - Update both inventory.json.sha512 files (root and v1)

Step 5: Re-validate the object:
   - Run: ocfl validate --object /workspace/objects/obj-017
   - Confirm validation passes

OCFL SPECIFICATION REFERENCE:
------------------------------
According to OCFL 1.1 specification section on inventory:
- contentDirectory: A directory name, not a path
- Forward slashes (/) are not permitted in contentDirectory values
- All content must be stored within the designated content directory
- Manifest and state entries must reference files relative to versions

FILE LOCATIONS INVOLVED:
------------------------
- Root inventory: /workspace/objects/obj-017/inventory.json
- Root checksum: /workspace/objects/obj-017/inventory.json.sha512
- Version inventory: /workspace/objects/obj-017/v1/inventory.json
- Version checksum: /workspace/objects/obj-017/v1/inventory.json.sha512
- Content file: /workspace/objects/obj-017/v1/content/test.txt (correctly located)

SEVERITY: HIGH
This object cannot be considered valid OCFL until the contentDirectory issue is resolved.
