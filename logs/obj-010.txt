OCFL OBJECT VALIDATION REPORT
Object ID: urn:example-3
Object Path: /workspace/objects/obj-010
Validation Status: INVALID
Report Generated: 2025-11-09

================================================================================
VALIDATION ERRORS
================================================================================

Error Code: E052
Location: root inventory.json
Message: invalid path: '../../file-2.txt'
Severity: Critical

================================================================================
SUMMARY OF VALIDATION ERRORS
================================================================================

The OCFL object obj-010 contains 3 critical path validation errors in the
inventory.json file. The errors are found in the state mapping for version v1:

1. INVALID PATH: "../../file-2.txt"
   - This path uses relative path navigation (../) which violates OCFL
     path specifications
   - Location: versions.v1.state (digest 9fef2458ee...)
   - The manifest correctly references "v1/content/file-2.txt" but the
     state mapping uses an invalid relative path

2. INVALID PATH: "//file-3.txt"
   - This path uses a double forward slash which violates OCFL path
     specifications
   - Location: versions.v1.state (digest b3b26d26c9...)
   - The manifest correctly references "v1/content/file-3.txt" but the
     state mapping uses an invalid path format

3. INVALID PATH: "/file-1.txt"
   - This path starts with a forward slash which could indicate an absolute
     path reference, violating OCFL specifications
   - Location: versions.v1.state (digest 07e41ccb16...)
   - While similar to the above, this uses absolute path syntax which is
     not permitted in OCFL

================================================================================
DETAILED ANALYSIS
================================================================================

OCFL Specification Requirements:
- All paths in the state mapping must be valid logical paths relative to
  the object root
- Paths must NOT contain:
  * Relative path traversal (../)
  * Double slashes (//)
  * Absolute path prefixes (/)
  * Non-ASCII characters
- Path segments must be URL-encoded where necessary
- Paths must be uniquely resolvable and not ambiguous

Current Object Structure:
- Object Version: v1 (head)
- Digest Algorithm: sha512
- Content Directory: content
- Files in manifest: 3 (file-1.txt, file-2.txt, file-3.txt)

The Problem:
The inventory.json file contains a state mapping for v1 with three files,
but each file's logical path is malformed:

1. The manifest correctly identifies three content files with their digest
   hashes
2. However, the state section maps these digests to invalid logical paths
3. These paths do not follow OCFL specifications for valid path format
4. The content files themselves appear to exist correctly at:
   - v1/content/file-1.txt
   - v1/content/file-2.txt
   - v1/content/file-3.txt

Root Cause:
The inventory.json was manually created or modified with incorrect path
references in the state section. The manifest paths are valid, but the
state mappings use non-compliant path syntax.

================================================================================
RECOMMENDED STEPS FOR FIXING THE OBJECT
================================================================================

Step 1: Backup the Current Object
  Command: cp -r /workspace/objects/obj-010 /workspace/objects/obj-010.backup
  Reason: Preserve the original state before making corrections

Step 2: Correct the inventory.json File
  Edit: /workspace/objects/obj-010/inventory.json

  Required Changes in the "state" section of "v1":

  CURRENT (INVALID):
  "state": {
    "07e41ccb166d21a5327d5a2ae1bb48192b8470e1357266c9d119c294cb1e95978569472c9de64fb6d93cbd4dd0aed0bf1e7c47fd1920de17b038a08a85eb4fa1": [
      "/file-1.txt"
    ],
    "9fef2458ee1a9277925614272adfe60872f4c1bf02eecce7276166957d1ab30f65cf5c8065a294bf1b13e3c3589ba936a3b5db911572e30dfcb200ef71ad33d5": [
      "../../file-2.txt"
    ],
    "b3b26d26c9d8cfbb884b50e798f93ac6bef275a018547b1560af3e6d38f2723785731d3ca6338682fa7ac9acb506b3c594a125ce9d3d60cd14498304cc864cf2": [
      "//file-3.txt"
    ]
  }

  CORRECTED (VALID):
  "state": {
    "07e41ccb166d21a5327d5a2ae1bb48192b8470e1357266c9d119c294cb1e95978569472c9de64fb6d93cbd4dd0aed0bf1e7c47fd1920de17b038a08a85eb4fa1": [
      "file-1.txt"
    ],
    "9fef2458ee1a9277925614272adfe60872f4c1bf02eecce7276166957d1ab30f65cf5c8065a294bf1b13e3c3589ba936a3b5db911572e30dfcb200ef71ad33d5": [
      "file-2.txt"
    ],
    "b3b26d26c9d8cfbb884b50e798f93ac6bef275a018547b1560af3e6d38f2723785731d3ca6338682fa7ac9acb506b3c594a125ce9d3d60cd14498304cc864cf2": [
      "file-3.txt"
    ]
  }

  The logical paths should be simple, relative, and not include any path
  traversal or absolute path prefixes. They represent the user-visible
  filenames/paths within the object version.

Step 3: Recalculate the Root inventory.json Checksum
  Edit: /workspace/objects/obj-010/inventory.json.sha512

  After correcting the inventory.json, you must update its SHA-512 digest:

  Command: sha512sum /workspace/objects/obj-010/inventory.json

  Copy the resulting hash (first field) to the inventory.json.sha512 file
  (remove any path information, just the hash value)

Step 4: Update the v1 inventory.json (if separate from root)
  Edit: /workspace/objects/obj-010/v1/inventory.json

  Apply the same corrections as Step 2 to the v1/inventory.json file

Step 5: Recalculate the v1 inventory.json Checksum
  Edit: /workspace/objects/obj-010/v1/inventory.json.sha512

  Command: sha512sum /workspace/objects/obj-010/v1/inventory.json

  Copy the resulting hash to the v1/inventory.json.sha512 file

Step 6: Validate the Corrected Object
  Command: ocfl validate --object=/workspace/objects/obj-010

  If validation succeeds, the object is now VALID
  If validation fails, review the error message and address any remaining issues

================================================================================
VALIDATION CHECKLIST
================================================================================

Before considering the object fixed, verify:

[ ] All paths in state section are valid (no /, //, ../, special chars)
[ ] Each state path represents a logical filename at object root level
[ ] The manifest paths remain unchanged and correct
[ ] SHA-512 checksums for inventory.json files have been recalculated
[ ] The root inventory.json.sha512 digest matches the file contents
[ ] The v1/inventory.json.sha512 digest matches the file contents
[ ] No extra whitespace or formatting issues in JSON
[ ] Valid JSON structure (no trailing commas, proper brackets)
[ ] ocfl validate command returns success (exit code 0)

================================================================================
REFERENCES
================================================================================

OCFL Specification: https://ocfl.io/1.1/spec/
Path Requirements: Section 3.3 of OCFL specification defines valid paths
Error Code E052: Invalid path specification violation

================================================================================
