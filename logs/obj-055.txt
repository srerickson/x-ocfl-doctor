OCFL VALIDATION REPORT FOR obj-055
===================================
Status: INVALID
Date: 2025-11-09
Object Path: /workspace/objects/obj-055

VALIDATION ERRORS SUMMARY
=========================
The OCFL object failed validation with 7 critical errors:

1. ERROR: root inventory.json: 1: invalid version (ocfl_code=E040)
   - Version "1" is marked as invalid

2. ERROR: root inventory.json: invalid key "1" in versions block (ocfl_code=E046)
   - The version key "1" is not properly formatted

3. ERROR: root inventory.json: missing required field: 'head' (ocfl_code=E036)
   - The root inventory.json is missing the required 'head' field

4. ERROR: root inventory.json: head is invalid: invalid version: num=0, padding=0 (ocfl_code=E011)
   - The head value is referencing an invalid version number

5. ERROR: root inventory.json: digest in manifest not used in version state (ocfl_code=E107)
   - Digest: ffc150e7944b5cf5ddb899b2f48efffbd490f97632fc258434aefc4afb92aef2e3441ddcceae11404e5805e1b6c804083c9398c28f061c9ba42dd4bac53d5a2e
   - This digest is declared in the manifest but not referenced in any version state

6. ERROR: root inventory.json: digest in manifest not used in version state (ocfl_code=E107)
   - Digest: 69f54f2e9f4568f7df4a4c3b07e4cbda4ba3bba7913c5218add6dea891817a80ce829b877d7a84ce47f93cbad8aa522bf7dd8eda2778e16bdf3c47cf49ee3bdf
   - This digest is declared in the manifest but not referenced in any version state

7. ERROR: root inventory.json: no versions found (ocfl_code=E008)
   - The inventory does not contain any valid version definitions


DETAILED ANALYSIS
=================

Object Structure:
- NAMASTE Declaration: Present (0=ocfl_object_1.1)
- Root inventory.json: Present and valid JSON syntax
- Version directory structure: Present (1/)
- Content files: Present (dracula.txt, poe.txt)
- Inventory checksums: Present

Issue Analysis:

1. VERSION KEY FORMAT PROBLEM:
   The "versions" object uses numeric key "1" which is not valid OCFL format.
   According to OCFL spec, version keys should be zero-padded strings like "v0001", not bare numbers.

   Current format (INVALID):
   {
     "versions": {
       "1": { ... }
     }
   }

   Expected format (VALID):
   {
     "versions": {
       "v0001": { ... }
     }
   }

2. HEAD VALUE PROBLEM:
   The head field currently contains "1", which matches the invalid version key.
   The head field should be "v0001" (or similar zero-padded version string).

   Current: "head": "1"
   Expected: "head": "v0001"

3. MANIFEST PATHS PROBLEM:
   The manifest contains paths prefixed with "1/content/" but these don't match actual content paths.
   The actual files exist at:
   - 1/content/my_content/dracula.txt
   - 1/content/my_content/poe.txt

   But the manifest lists:
   - "1/content/my_content/dracula.txt" (correct)
   - "1/content/my_content/poe.txt" (correct)

   However, the contentDirectory is set to "content", which means the paths should be relative
   to this directory. The current paths are absolute from the version root, not relative
   to the contentDirectory.

4. VERSION STATE CONTENT PATHS:
   The version state uses simple filenames (e.g., "my_content/dracula.txt") but these
   don't have proper directory structure alignment with the actual filesystem.


RECOMMENDED FIX STEPS
=====================

1. RENAME VERSION KEYS:
   Change all instances of "1" to "v0001" in the versions block:
   - Update "versions" object keys: "1" → "v0001"
   - Update "head" field: "1" → "v0001"
   - Ensure version numbering uses zero-padded format (v0001, v0002, etc.)

2. FIX MANIFEST PATHS:
   Update the manifest to use correct relative paths:
   FROM:
     "manifest": {
       "ffc150e7944b5cf5ddb899b2f48efffbd490f97632fc258434aefc4afb92aef2e3441ddcceae11404e5805e1b6c804083c9398c28f061c9ba42dd4bac53d5a2e": [
         "1/content/my_content/dracula.txt"
       ],
       "69f54f2e9f4568f7df4a4c3b07e4cbda4ba3bba7913c5218add6dea891817a80ce829b877d7a84ce47f93cbad8aa522bf7dd8eda2778e16bdf3c47cf49ee3bdf": [
         "1/content/my_content/poe.txt"
       ]
     }

   TO:
     "manifest": {
       "ffc150e7944b5cf5ddb899b2f48efffbd490f97632fc258434aefc4afb92aef2e3441ddcceae11404e5805e1b6c804083c9398c28f061c9ba42dd4bac53d5a2e": [
         "v0001/content/my_content/dracula.txt"
       ],
       "69f54f2e9f4568f7df4a4c3b07e4cbda4ba3bba7913c5218add6dea891817a80ce829b877d7a84ce47f93cbad8aa522bf7dd8eda2778e16bdf3c47cf49ee3bdf": [
         "v0001/content/my_content/poe.txt"
       ]
     }

3. UPDATE VERSION DIRECTORY:
   Rename the "1" directory to "v0001":
   - mv /workspace/objects/obj-055/1 /workspace/objects/obj-055/v0001

4. UPDATE INVENTORY CHECKSUM:
   After making changes to inventory.json, regenerate the checksum:
   - Calculate SHA512 hash of the updated inventory.json
   - Update inventory.json.sha512 with the new hash

5. REVALIDATE:
   After all changes, run validation again to ensure compliance:
   - ocfl validate --object=/workspace/objects/obj-055


OCFL SPECIFICATION REFERENCES
==============================
- E040: Invalid version number format
- E046: Invalid key in versions block
- E036: Missing required field in inventory
- E011: Invalid head version reference
- E107: Manifest entry not referenced in any version state
- E008: No valid versions found

The object structure is fundamentally sound, but uses improper version naming conventions
that violate OCFL 1.1 specification requirements for zero-padded version identifiers.
