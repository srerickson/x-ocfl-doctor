OCFL OBJECT VALIDATION REPORT
Object ID: obj-048
Validation Status: INVALID
Validation Timestamp: 2025-11-09

========================================
VALIDATION ERROR SUMMARY
========================================

Error Code: E066
Error Message: v1/inventory.json has different logical state in its v1 version block than the root inventory.json

========================================
DETAILED ANALYSIS
========================================

ISSUE DESCRIPTION:
The object contains a critical inconsistency between the v1/inventory.json file and the root
inventory.json file. These two files must contain identical state information for version v1,
as per OCFL specifications.

ROOT INVENTORY (inventory.json) - v1 state:
  - Digest: 24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5...
  - Files listed:
    * test.txt

V1 VERSION INVENTORY (v1/inventory.json) - v1 state:
  - Digest: 24f950aac7b9ea9b3cb728228a0c82b67c39e96b4b344798870d5daee93e3ae5...
  - Files listed:
    * test.txt
    * 1.txt
    * 2.txt
    * 3.txt

DISCREPANCY:
The v1/inventory.json file claims that version v1 contained 4 files (test.txt, 1.txt, 2.txt, 3.txt),
but the root inventory.json file states that version v1 only contained 1 file (test.txt).

Additionally, the v1/inventory.json has "head": "v1", while the root inventory.json has "head": "v2",
indicating the v1 inventory is outdated and does not reflect the current state of the object.

OCFL SPECIFICATION VIOLATION:
According to OCFL 1.1 specifications, each version inventory (v1/inventory.json, v2/inventory.json, etc.)
must contain the exact cumulative state at that point in time. The version-specific inventories serve as
immutable snapshots. The root inventory.json must accurately reflect all version histories.

The state object for v1 in v1/inventory.json must match the state object for v1 in the root
inventory.json file exactly.

========================================
ROOT CAUSE
========================================

The v1/inventory.json appears to be out of sync with the root inventory.json. This could have
occurred due to:

1. Manual editing or corruption of the v1/inventory.json file
2. Incomplete version creation process where v1/inventory.json was created with incorrect state data
3. System failure during object creation/update, leaving the versions directory in an inconsistent state
4. Prior manual editing that updated the root inventory.json but failed to update the v1/inventory.json

========================================
RECOMMENDED FIX STEPS
========================================

1. VERIFY DATA INTEGRITY:
   - Check if the actual content files exist in v1/content/ directory
   - Verify which files (1.txt, 2.txt, 3.txt) actually belong to version v1
   - Determine the correct state that v1 should have

2. OPTION A - If v1 should only contain test.txt:
   - Delete v1/inventory.json (it will be regenerated or needs manual correction)
   - Verify that v1/content/ only contains test.txt
   - Update the v1/inventory.json to match the root inventory.json state for v1
   - Re-validate with: ocfl validate --object /workspace/objects/obj-048

3. OPTION B - If v1 should contain all 4 files:
   - The root inventory.json is incorrect
   - Update the root inventory.json v1.state to include test.txt, 1.txt, 2.txt, 3.txt
   - Ensure the manifest entries are correct
   - Verify v2/inventory.json is also consistent
   - Re-validate

4. VERIFICATION STEPS:
   - Compare manifest entries across all inventory files
   - Ensure all referenced files exist in their stated locations
   - Verify digest values match actual file contents
   - Check that version chain is correct (v1 -> v2)

5. BACKUP BEFORE REPAIR:
   - Create a backup of /workspace/objects/obj-048 before making changes
   - Keep the original logs for audit purposes

========================================
COMPLIANCE NOTE
========================================

Error Code E066 is a critical validation failure. The object cannot be considered compliant
with OCFL 1.1 specifications until this inconsistency is resolved. Do not attempt to use
this object in production systems until validation passes.

========================================
