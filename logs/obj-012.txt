OCFL OBJECT VALIDATION REPORT
=============================
Object ID: info:bad05
Object Path: /workspace/objects/obj-012
Validation Status: INVALID
Report Generated: 2025-11-09

VALIDATION ERRORS SUMMARY
=========================

Critical Errors (E023):
- ERROR: unexpected content: v1/content/file2.txt
  OCFL Code: E023
  Description: The file 'file2.txt' exists in the v1/content directory but is not listed in the inventory.json manifest.

Warnings:
1. WARN root inventory.json: version v1 missing recommended field: 'message'
   OCFL Code: W007
   Description: The version object is missing the recommended 'message' field (though it has an empty string).

2. WARN root inventory.json: version v1 user address is not a URI
   OCFL Code: W009
   Description: The user 'address' field contains "somewhere" which is not a valid URI.

3. WARN v1/inventory.json: version v1 missing recommended field: 'message'
   OCFL Code: W007
   Description: Same as above warning in root inventory.

4. WARN v1/inventory.json: version v1 user address is not a URI
   OCFL Code: W009
   Description: Same as above warning in root inventory.


DETAILED ANALYSIS
=================

1. PRIMARY ISSUE: Unexpected Content (CRITICAL)

   The validation failed because there is a mismatch between the actual content files
   and what is declared in the inventory.json file.

   Actual files in v1/content/:
   - file.txt (6 bytes)
     SHA512: e7c22b994c59d9cf2b48e549b1e24666636045930d3da7c1acb299d1c3b7f931f94aae41edda2c2b207a36e10f8bcb8d45223e54878f5b316e7ce3b6bc019629

   - file2.txt (12 bytes) *NOT IN INVENTORY*
     SHA512: dfe9a0bbfdaab7173036571a1d9e34e2465b1e3a52e8b707bbf6dea9239a9a55b0fc9e511fc24882d7f493cd950a9dbef1de13e08a007909b21cd5ba54dc4888

   Declared in inventory.json manifest:
   - Only file.txt is listed with its hash

   Issue: file2.txt is physically present in the content directory but not declared
   in the inventory.json manifest. This violates OCFL requirement E023 which mandates
   that all content in the content directory must be listed in the inventory's manifest.

2. SECONDARY ISSUES: Warning-Level Problems

   a) Missing 'message' field (W007):
      - The v1 version object has an empty string for 'message' rather than being omitted
      - While the field is present, it's empty which is not ideal
      - This is a recommended field per OCFL specification

   b) Invalid user address URI (W009):
      - The user 'address' field contains "somewhere" which is not a valid URI
      - OCFL spec recommends this be a valid URI (e.g., email address, URL, etc.)
      - Current value: "somewhere"
      - This should be a proper URI format

3. Object Structure:
   The object follows OCFL 1.1 specification structure with:
   - Root inventory.json
   - Root inventory.json.sha512
   - Version directory (v1)
   - Version-specific inventory.json
   - Version-specific inventory.json.sha512
   - Content directory with actual files


RECOMMENDED STEPS FOR FIXING
=============================

Priority 1 (CRITICAL - Must fix for valid OCFL):
1. Remove file2.txt from /workspace/objects/obj-012/v1/content/
   OR
   Add file2.txt to the inventory.json manifest with its proper hash and state reference

   To add file2.txt to inventory:
   - Add the hash "dfe9a0bbfdaab7173036571a1d9e34e2465b1e3a52e8b707bbf6dea9239a9a55b0fc9e511fc24882d7f493cd950a9dbef1de13e08a007909b21cd5ba54dc4888"
     to the manifest section pointing to "v1/content/file2.txt"
   - Add a reference to this hash in the v1 version state section with a filename
   - Recalculate and update both inventory.json.sha512 files

Priority 2 (RECOMMENDED - Fix warnings):
1. Replace the empty 'message' field with either a proper message string or remove it entirely
   Example: "message": "Initial version with file content"

2. Update the user 'address' field to be a valid URI
   Example: "address": "mailto:someone@example.com"
   or: "address": "https://example.com/someone"

3. Recalculate SHA512 checksums for both inventory.json files after making changes


VALIDATION COMMAND
===================
To revalidate after fixes:
ocfl validate --object=/workspace/objects/obj-012

Without --skip-digest flag to fully validate checksums.
